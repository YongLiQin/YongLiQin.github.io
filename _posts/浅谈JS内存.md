---
title: 浅谈JS内存
date: 2017-10-26 19:48:34
tags: JavaScript
---
## 序言

与前端不同，后端是直面服务器的，所以对性能的要求更高，对内存有更高的要求。如果存在内存泄漏，跟随着时间的流逝，内存泄漏越来越多，程序运行也会越来越慢，最终崩溃。所以要想深入学习node，控制内存的使用是至关重要的。

## 内存管理

### 概述

C语言有低级的原生内存管理原语，像malloc()和free()，开发人员使用这些原语可以显式分配和释放内存。

JavaScript在创建变量时会自动分配内存，并在这些变量不被使用时自动释放内存－－－垃圾回收机制。

### 内存生命周期

Allocate => Use Memory => Release memory

- 分配内存
- 使用内存
- 释放内存

### 内存

- 所有的变量和程序中用到的数据。
- 程序的代码，包括操作系统的代码。

编译器和操作系统共同帮助开发者完成大部分的内存管理。

#### 动态分配

#### JavaScript中的内存分配

JavaScript在开发者声明值的时候自动分配内存。

```js
var n = 374;//为数值分配内存
var s = 'sessionstack';//为字符串分配内存
var o = {
    a: 1,
    b: null,
};//为对象和它包含的值分配内存
var a = [1, null, 'str'];//为数组和它包含的值分配内存
function f (a) {
    return a + 3;
};//为函数(可调用的对象)分配内存
//函数表达式也会分配一个对象
```

#### 垃圾收集

##### 引用计数

##### 标记清除算法