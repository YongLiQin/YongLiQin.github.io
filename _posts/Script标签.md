---
title: Script标签
date: 2019-03-15 15:08:04
tags:
---

## 序言

向HTML页面中插入JavaScript的主要方法，就是使用script元素。

<!-- more -->

## 使用

### 属性

- async：可选，表示应该立即下载脚本，但不应该妨碍页面中的其他操作。只对外部脚本文件有效。
- charset：可选，表示通过src属性指定的代码的字符集，大多数浏览器会忽略它，一般不被人使用。
- defer：可选，表示脚本可以延迟到文档完全解析和显示之后再执行。只对外部脚本文件有效。
- src：可选，表示包含要执行代码的外部文件。
- type：可选，表示编写代码使用的脚本语言的内容类型。


### 标签位置

#### header元素中

header元素中包含所有的JavaScript文件，意味着必须等到全部JavaScript代码都被下载、解析和执行完成以后，才能开始呈现页面的内容(浏览器在遇到body标签时才开始呈现内容)。对于那些需要很多JavaScript代码的页面来说，这无疑会导致浏览器在呈现页面时出现明显的延迟，而延迟期间的浏览器窗口中将是一片空白。

一般避免的办法是把全部JavaScript引用放到在body元素内容的后面，这样子，在解析包含的JavaScript代码之前，页面的内容将完全呈现在浏览器中。

### 延迟脚本(defer属性)

defer这个属性的用途是表明脚本在执行时不会影响页面的构造。也就是说，脚本会被延迟到整个页面都被解析完毕后再运行。因此，在script元素中设置defer属性，相当于告诉浏览器立即下载，延迟执行。

HTML5规范要求脚本按照他们出现的先后顺序执行，因此第一个延迟脚本会先于第二个延迟脚本执行，而这两个脚本会先于DOMContentLoaded事件执行。在现实当中，延迟脚本并不一定会按照顺序执行，也不一定在DOMContentLoaded事件触发前执行，因此最好只包含一个延迟脚本。

### 异步脚本(async属性)

async这个属性与defer属性类似，都用于改变处理脚本的行为。同样与defer类似，async只适用于外部脚本，并告诉浏览器立即下载文件。但与defer不同的是，标记为async的脚本并不保证按照它们的先后顺序执行。

使用async属性，如果引入两个脚本文件，第二个脚本文件可能会在第一个脚本文件之前执行。因此，确保两者之间互不依赖非常重要。指定async属性的目的是不让页面等待两个脚本下载和执行，从而异步加载页面其他内容。为此，建议异步脚本不要在加载期间修改DOM。

异步脚本一定会在页面的load事件前执行，但可能会在DOMContentLoaded事件触发之前或之后执行。

